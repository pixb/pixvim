# neovim 0.11 还需要 neovim-lspconfig 插件吗？

简单来说：**在 Neovim 0.11+ 中，你确实可以完全不用 `nvim-lspconfig` 插件，但目前大多数人依然会选择保留它。**

让我们用五步法来拆解这场“去插件化”的变革。

---

### Neovim 0.11+ 内置 LSP 深度解析

#### 1. 提出场景 (Scenario)

你正在追求一个极简的 Neovim 配置（Minimalist Config）。
你听说新版本性能更强，想把所有“非必要”的插件都删掉。
你心想：“既然 Neovim 已经支持 LSP 了，为什么我还要装一个叫 `lspconfig` 的插件来‘配置’它？
这不是脱裤子放屁吗？”

#### 2. 发现局限 (Limitation)

如果你直接删掉 `nvim-lspconfig` 并尝试原生启动：

* **痛点 A (繁杂的配置)**：每个语言服务器（LSP Server）启动时都需要一堆复杂的参数
（如 `cmd` 命令路径、`root_dir` 根目录识别、`settings` 初始化配置）。
* **痛点 B (重复造轮子)**：没有插件时，
你需要为 Python、Rust、Lua 每一个语言手动写几十行 Lua 代码来告诉 Neovim 怎么启动它们。
* **痛点 C (环境差异)**：不同操作系统的路径和命令名可能不同，原生配置很难自动适配。

#### 3. 引入概念 (Concept)

**`vim.lsp.enable()` & `vim.lsp.config**`
这是 Neovim 0.11 引入的重磅功能。

* **本质**：Neovim 官方开始将以前属于 `lspconfig` 插件的“配置模版”直接内置到编辑器核心里。
* **目的**：让 Neovim 具备“零配置”启动主流 LSP 的能力，降低对第三方插件的依赖。

#### 4. 核心操作 (Core Mechanics)

在 0.11 之前，你必须使用插件：

```lua
-- 旧写法 (依赖 nvim-lspconfig)
require('lspconfig').pyright.setup({})

```

在 0.11+ 中，你可以直接调用内置函数：

```lua
-- 新写法 (原生内置)
vim.lsp.enable('pyright') 

```

#### 5. 功能实现 (Implementation)

**既然内置了，为什么大家还不删 `lspconfig`？**

目前处于**过渡期**，这就是目前的实现现状：

| 方案 | 优点 | 缺点 |
| --- | --- | --- |
| **完全原生 (0.11+)** | 启动速度极快，无插件依赖。 | 目前内置的 Server 模版还不够全（仅覆盖主流），自定义复杂配置较麻烦。 |
| **保留 lspconfig** | 极其成熟，支持数百种语言，文档丰富。 | 多了一个插件层，虽然性能损耗微乎其微。 |

**导师建议：**

* **如果你是“配置折腾家”**：建议尝试删除 `lspconfig`，直接用 `vim.lsp.enable()`。你会发现 `lua_ls` 或 `pyright` 这种主流语言已经可以丝滑运行了。
* **如果你是“生产力优先”**：继续保留 `lspconfig`。因为目前 0.11 的内置配置系统在处理“多 Server 共存”或“特定工作区配置”时，还没有插件那么成熟。

---

**你想看看如果不使用插件，只用 0.11 原生代码该如何配置你的某个具体语言（比如 Python 或 Go）吗？
**是一个非常敏锐的问题！作为你的认知导师，我得告诉你：**技术正处于一个有趣的转折点。**

简单来说：**在 Neovim 0.11+ 中，你确实可以完全不用 `nvim-lspconfig` 插件，但目前大多数人依然会选择保留它。**

让我们用五步法来拆解这场“去插件化”的变革。
